{"ast":null,"code":"import React from\"react\";import _ from\"lodash\";import Spinner from\"../elements/Spinner\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var InfinityScroll=function InfinityScroll(props){var children=props.children,callNext=props.callNext,is_next=props.is_next,loading=props.loading;var _handleScroll=_.throttle(function(){if(loading){return;}var _window=window,innerHeight=_window.innerHeight;var scrollHeight=document.body.scrollHeight;var scrollTop=document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop;if(scrollHeight-innerHeight-scrollTop<200){callNext();}},300);var handleScroll=React.useCallback(_handleScroll,[loading]);React.useEffect(function(){if(loading){return;}if(is_next){window.addEventListener(\"scroll\",handleScroll);//구독 \n}else{window.removeEventListener(\"scroll\",handleScroll);}return function(){return window.removeEventListener(\"scroll\",handleScroll);};// Clean Up, 언마운트와 비슷하게 동작 \n},[is_next,loading]);return/*#__PURE__*/_jsxs(React.Fragment,{children:[props.children,is_next&&/*#__PURE__*/_jsx(Spinner,{})]});};InfinityScroll.defaultProps={children:null,callNext:function callNext(){},is_next:false,loading:false};export default InfinityScroll;","map":{"version":3,"sources":["/Users/jeongeunchoi/REACT_MIDDLEAGE/image-community/src/shared/InfinityScroll.js"],"names":["React","_","Spinner","InfinityScroll","props","children","callNext","is_next","loading","_handleScroll","throttle","window","innerHeight","scrollHeight","document","body","scrollTop","documentElement","handleScroll","useCallback","useEffect","addEventListener","removeEventListener","defaultProps"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,CAAP,KAAc,QAAd,CACA,MAAOC,CAAAA,OAAP,KAAoB,qBAApB,C,wFAGA,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACC,KAAD,CAAW,IAEvBC,CAAAA,QAFuB,CAEiBD,KAFjB,CAEvBC,QAFuB,CAEbC,QAFa,CAEiBF,KAFjB,CAEbE,QAFa,CAEHC,OAFG,CAEiBH,KAFjB,CAEHG,OAFG,CAEMC,OAFN,CAEiBJ,KAFjB,CAEMI,OAFN,CAI9B,GAAMC,CAAAA,aAAa,CAAGR,CAAC,CAACS,QAAF,CAAW,UAAM,CAEnC,GAAGF,OAAH,CAAW,CACP,OACH,CAJkC,YAMbG,MANa,CAM5BC,WAN4B,SAM5BA,WAN4B,IAO5BC,CAAAA,YAP4B,CAOZC,QAAQ,CAACC,IAPG,CAO5BF,YAP4B,CASnC,GAAMG,CAAAA,SAAS,CAAGF,QAAQ,CAACG,eAAT,EAA4BH,QAAQ,CAACG,eAAT,CAAyBD,SAAtD,EAAoEF,QAAQ,CAACC,IAAT,CAAcC,SAAnG,CAEA,GAAGH,YAAY,CAAGD,WAAf,CAA6BI,SAA7B,CAAwC,GAA3C,CAAgD,CAC5CV,QAAQ,GACX,CAEJ,CAfqB,CAenB,GAfmB,CAAtB,CAiBA,GAAMY,CAAAA,YAAY,CAAGlB,KAAK,CAACmB,WAAN,CAAmBV,aAAnB,CAAkC,CAACD,OAAD,CAAlC,CAArB,CAEAR,KAAK,CAACoB,SAAN,CAAgB,UAAM,CAElB,GAAGZ,OAAH,CAAW,CACP,OACH,CAID,GAAGD,OAAH,CAAW,CACPI,MAAM,CAACU,gBAAP,CAAwB,QAAxB,CAAkCH,YAAlC,EAAiD;AACpD,CAFD,IAEK,CACDP,MAAM,CAACW,mBAAP,CAA2B,QAA3B,CAAqCJ,YAArC,EACH,CAED,MAAM,kBAAMP,CAAAA,MAAM,CAACW,mBAAP,CAA2B,QAA3B,CAAqCJ,YAArC,CAAN,EAAN,CAAgE;AACnE,CAfD,CAeG,CAACX,OAAD,CAAUC,OAAV,CAfH,EAgBA,mBACI,MAAC,KAAD,CAAO,QAAP,YACKJ,KAAK,CAACC,QADX,CAEKE,OAAO,eAAK,KAAC,OAAD,IAFjB,GADJ,CAMH,CA7CD,CAgDAJ,cAAc,CAACoB,YAAf,CAA6B,CACzBlB,QAAQ,CAAC,IADgB,CAEzBC,QAAQ,CAAC,mBAAM,CAAE,CAFQ,CAGzBC,OAAO,CAAE,KAHgB,CAIzBC,OAAO,CAAE,KAJgB,CAA7B,CAMA,cAAeL,CAAAA,cAAf","sourcesContent":["import React from \"react\";\nimport _ from \"lodash\";\nimport Spinner from \"../elements/Spinner\"\n\n\nconst InfinityScroll = (props) => {\n\n    const {children, callNext, is_next, loading} = props;\n\n    const _handleScroll = _.throttle(() => {\n\n        if(loading){\n            return;\n        }\n\n        const {innerHeight} = window;\n        const {scrollHeight} = document.body;\n\n        const scrollTop =(document.documentElement && document.documentElement.scrollTop) || document.body.scrollTop;\n\n        if(scrollHeight - innerHeight - scrollTop <200) {\n            callNext();\n        }\n\n    }, 300);\n\n    const handleScroll = React.useCallback( _handleScroll, [loading]);\n\n    React.useEffect(() => {\n\n        if(loading){\n            return;\n        }\n\n       \n\n        if(is_next){\n            window.addEventListener(\"scroll\", handleScroll); //구독 \n        }else{\n            window.removeEventListener(\"scroll\", handleScroll);\n        }\n\n        return() => window.removeEventListener(\"scroll\", handleScroll); // Clean Up, 언마운트와 비슷하게 동작 \n    }, [is_next, loading]);\n    return (\n        <React.Fragment>\n            {props.children}\n            {is_next && (<Spinner/>)}\n        </React.Fragment>\n    )\n}\n\n\nInfinityScroll.defaultProps ={\n    children:null,\n    callNext:() => {},\n    is_next: false,\n    loading: false,\n}\nexport default InfinityScroll;"]},"metadata":{},"sourceType":"module"}