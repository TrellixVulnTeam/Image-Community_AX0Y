{"ast":null,"code":"import React from\"react\";import{storage}from\"./firebase\";import{Button}from\"../elements\";import{useDispatch,useSelector}from\"react-redux\";import{actionCreators as imageActions}from\"../redux/modules/image\";// import 해와야함\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Upload=function Upload(props){var dispatch=useDispatch();var is_uploading=useSelector(function(state){return state.image.uploading;});var fileInput=React.useRef();var selectFile=function selectFile(e){console.log(e);console.log(e.target);console.log(e.target.files[0]);console.log(fileInput.current.files[0]);var reader=new FileReader();var file=fileInput.current.files[0];reader.readAsDataURL(file);reader.onloadend=function(){console.log(reader.result);dispatch(imageActions.setPreview(reader.result));};};var uploadFB=function uploadFB(){var image=fileInput.current.files[0];var _upload=storage.ref(\"images/\".concat(image.name)).put(image);_upload.then(function(snapshot){console.log(snapshot);snapshot.ref.getDownloadURL().then(function(url){console.log(url);});});};return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:selectFile,ref:fileInput,disabled:is_uploading}),/*#__PURE__*/_jsx(Button,{_onClick:uploadFB,children:\"\\uC5C5\\uB85C\\uB4DC\\uD558\\uAE30\"})]});};export default Upload;","map":{"version":3,"sources":["/Users/jeongeunchoi/REACT_MIDDLEAGE/image-community/src/shared/Upload.js"],"names":["React","storage","Button","useDispatch","useSelector","actionCreators","imageActions","Upload","props","dispatch","is_uploading","state","image","uploading","fileInput","useRef","selectFile","e","console","log","target","files","current","reader","FileReader","file","readAsDataURL","onloadend","result","setPreview","uploadFB","_upload","ref","name","put","then","snapshot","getDownloadURL","url"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,OAAR,KAAsB,YAAtB,CACA,OAAQC,MAAR,KAAqB,aAArB,CACA,OAAQC,WAAR,CAAqBC,WAArB,KAAuC,aAAvC,CACA,OAAQC,cAAc,GAAIC,CAAAA,YAA1B,KAA6C,wBAA7C,CAAuE;wFAIvE,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAACC,KAAD,CAAW,CACtB,GAAMC,CAAAA,QAAQ,CAAGN,WAAW,EAA5B,CACA,GAAMO,CAAAA,YAAY,CAAGN,WAAW,CAAC,SAAAO,KAAK,QAAIA,CAAAA,KAAK,CAACC,KAAN,CAAYC,SAAhB,EAAN,CAAhC,CAEA,GAAMC,CAAAA,SAAS,CAAGd,KAAK,CAACe,MAAN,EAAlB,CAEA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,CAAD,CAAO,CACtBC,OAAO,CAACC,GAAR,CAAYF,CAAZ,EACAC,OAAO,CAACC,GAAR,CAAYF,CAAC,CAACG,MAAd,EACAF,OAAO,CAACC,GAAR,CAAYF,CAAC,CAACG,MAAF,CAASC,KAAT,CAAe,CAAf,CAAZ,EAGAH,OAAO,CAACC,GAAR,CAAYL,SAAS,CAACQ,OAAV,CAAkBD,KAAlB,CAAwB,CAAxB,CAAZ,EAEA,GAAME,CAAAA,MAAM,CAAG,GAAIC,CAAAA,UAAJ,EAAf,CACA,GAAMC,CAAAA,IAAI,CAAGX,SAAS,CAACQ,OAAV,CAAkBD,KAAlB,CAAwB,CAAxB,CAAb,CAEAE,MAAM,CAACG,aAAP,CAAqBD,IAArB,EACAF,MAAM,CAACI,SAAP,CAAkB,UAAM,CACpBT,OAAO,CAACC,GAAR,CAAYI,MAAM,CAACK,MAAnB,EACAnB,QAAQ,CAACH,YAAY,CAACuB,UAAb,CAAwBN,MAAM,CAACK,MAA/B,CAAD,CAAR,CAGH,CALD,CAMH,CAlBD,CAoBA,GAAME,CAAAA,QAAQ,CAAE,QAAVA,CAAAA,QAAU,EAAM,CAClB,GAAIlB,CAAAA,KAAK,CAAGE,SAAS,CAACQ,OAAV,CAAkBD,KAAlB,CAAwB,CAAxB,CAAZ,CACA,GAAMU,CAAAA,OAAO,CAAG9B,OAAO,CAAC+B,GAAR,kBAAsBpB,KAAK,CAACqB,IAA5B,GAAoCC,GAApC,CAAwCtB,KAAxC,CAAhB,CAEAmB,OAAO,CAACI,IAAR,CAAa,SAACC,QAAD,CAAc,CACvBlB,OAAO,CAACC,GAAR,CAAYiB,QAAZ,EAGAA,QAAQ,CAACJ,GAAT,CAAaK,cAAb,GAA8BF,IAA9B,CAAmC,SAACG,GAAD,CAAO,CACtCpB,OAAO,CAACC,GAAR,CAAYmB,GAAZ,EACH,CAFD,EAGH,CAPD,EAQH,CAZD,CAeA,mBACI,MAAC,KAAD,CAAO,QAAP,yBACI,cAAO,IAAI,CAAE,MAAb,CAAoB,QAAQ,CAAItB,UAAhC,CAA4C,GAAG,CAAEF,SAAjD,CAA4D,QAAQ,CAAEJ,YAAtE,EADJ,cAEI,KAAC,MAAD,EAAQ,QAAQ,CAAEoB,QAAlB,4CAFJ,GADJ,CAOH,CAhDD,CAmDA,cAAevB,CAAAA,MAAf","sourcesContent":["import React from \"react\";\nimport {storage} from \"./firebase\";\nimport {Button} from \"../elements\"\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {actionCreators as imageActions} from \"../redux/modules/image\"; // import 해와야함\n\n\n\nconst Upload = (props) => {\n    const dispatch = useDispatch();\n    const is_uploading = useSelector(state => state.image.uploading);\n\n    const fileInput = React.useRef();\n\n    const selectFile = (e) => {\n        console.log(e);\n        console.log(e.target);\n        console.log(e.target.files[0]);\n\n\n        console.log(fileInput.current.files[0]);\n\n        const reader = new FileReader();\n        const file = fileInput.current.files[0];\n\n        reader.readAsDataURL(file);\n        reader.onloadend =() => {\n            console.log(reader.result)\n            dispatch(imageActions.setPreview(reader.result));\n            \n            \n        }\n    }\n\n    const uploadFB =() => {\n        let image = fileInput.current.files[0];\n        const _upload = storage.ref(`images/${image.name}`).put(image);\n\n        _upload.then((snapshot) => {\n            console.log(snapshot);\n\n\n            snapshot.ref.getDownloadURL().then((url)=>{\n                console.log(url);\n            })\n        })\n    }\n\n    \n    return (\n        <React.Fragment>\n            <input type =\"file\" onChange = {selectFile} ref={fileInput} disabled={is_uploading}/> \n            <Button _onClick={uploadFB}>업로드하기</Button>\n\n        </React.Fragment>\n    )\n}\n\n\nexport default Upload;"]},"metadata":{},"sourceType":"module"}